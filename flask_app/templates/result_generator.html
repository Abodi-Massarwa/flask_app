{% extends "base.html" %}

{% block content %}
<div class="container algorithm-container">
    <h1>Algorithm Result for {{ algorithm }}</h1>

    <h2>Instance Details</h2>
    <div class="instance-details">
        <p><strong>Instance:</strong> {{ instance }}</p>
        <p><strong>Agent Category Capacities:</strong> {{ agent_category_capacities }}</p>
        <p><strong>Categories:</strong> {{ categories }}</p>

        {% if algorithm != 'algorithm5' %}
            <p><strong>Initial Agent Order:</strong> {{ initial_agent_order }}</p>
        {% endif %}

        {% if algorithm == 'algorithm2' %}
            <p><strong>Target Category:</strong> {{ target_category }}</p>
        {% elif algorithm == 'algorithm3' %}
            <p><strong>Target Category Pair:</strong> {{ target_category_pair }}</p>
        {% endif %}
    </div>

    <h2>Algorithm Result</h2>
    <div class="algorithm-result">
        <p>{{ result }}</p>
    </div>

    <h2>Graph Animation</h2>
    <div id="slideshow">
        {% for img_data in images_data %}
        <img class="slide" src="data:image/png;base64,{{ img_data }}" style="display:none;"/>
        {% endfor %}
    </div>

    <div class="button-container">
        <button id="toggleLogsButton" class="algo-button">Show Logs</button>
    </div>

    <div id="logsContainer" style="display:none;">
        <h2>Algorithm Logs</h2>
        <pre class="log-content">
            {% for log in logs %}
                {{ log }}
            {% endfor %}
        </pre>
    </div>
</div>

<script type="text/javascript">
    var current = 0;
    var slides = document.querySelectorAll('.slide');
    
    function showNextSlide() {
        if (slides.length > 0) {
            slides[current].style.display = 'none';
            current = (current + 1) % slides.length;
            slides[current].style.display = '';
        }
    }
    
    setInterval(showNextSlide, 3000); // Time between slides in milliseconds
    
    // Initially show the first slide if there are any slides
    if (slides.length > 0) {
        slides[current].style.display = '';
    }
    
    // Toggle logs visibility
    document.getElementById('toggleLogsButton').addEventListener('click', function() {
        var logsContainer = document.getElementById('logsContainer');
        if (logsContainer.style.display === 'none') {
            logsContainer.style.display = 'block';
            this.textContent = 'Hide Logs';
        } else {
            logsContainer.style.display = 'none';
            this.textContent = 'Show Logs';
        }
    });
</script>
{% endblock %}

